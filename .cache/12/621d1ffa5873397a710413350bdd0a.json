{"id":"Focm","dependencies":[{"name":"/Users/martijn/CMD/Year3/Datavis/functional-programming/package.json","includedInParent":true,"mtime":1573643206615},{"name":"./renderBarChart.js","loc":{"line":1,"column":27},"parent":"/Users/martijn/CMD/Year3/Datavis/functional-programming/src/index.js","resolved":"/Users/martijn/CMD/Year3/Datavis/functional-programming/src/renderBarChart.js"},{"name":"./renderDonutChart.js","loc":{"line":2,"column":29},"parent":"/Users/martijn/CMD/Year3/Datavis/functional-programming/src/index.js","resolved":"/Users/martijn/CMD/Year3/Datavis/functional-programming/src/renderDonutChart.js"}],"generated":{"js":"\"use strict\";var e=t(require(\"./renderBarChart.js\")),a=t(require(\"./renderDonutChart.js\"));function t(e){return e&&e.__esModule?e:{default:e}}var n=0,r=19,o=[],s=\"\\n  #+ summary: Get titles meestvoorkomende catogrieen\\n  PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\\n  PREFIX dc: <http://purl.org/dc/elements/1.1/>\\n  PREFIX dct: <http://purl.org/dc/terms/>\\n  PREFIX skos: <http://www.w3.org/2004/02/skos/core#>\\n  PREFIX edm: <http://www.europeana.eu/schemas/edm/>\\n  PREFIX foaf: <http://xmlns.com/foaf/0.1/>\\n  # tel aantallen per materiaal\\n  SELECT ?categoryLabel ?category (COUNT(?allChos) AS ?objCount) WHERE {\\n    ?cho edm:isRelatedTo <https://hdl.handle.net/20.500.11840/termmaster2802> .\\n    <https://hdl.handle.net/20.500.11840/termmaster2802> skos:narrower ?category .\\n    ?category skos:prefLabel ?categoryLabel .\\n    ?category skos:narrower* ?allChos .\\n  }\\n    \\n  GROUP BY ?categoryLabel ?category\\n  ORDER BY DESC(?objCount)\\n\",l=function(e,a,t,n){fetch(\"\".concat(e,\"?query=\").concat(encodeURIComponent(a),\"&format=json\")).then(function(e){return e.json()}).then(function(e){return n(e,t)})},c=function(e){var a=u(e);i(a)};l(\"https://api.data.netwerkdigitaalerfgoed.nl/datasets/ivo/NMVW/services/NMVW-20/sparql\",s,\"\",c);var u=function(e){return e.results.bindings.map(function(e){return{termmaster:\"<\".concat(e.category.value,\">\"),name:e.categoryLabel.value,value:e.objCount.value}})},i=function(e){e.forEach(function(e){var a=\"\\n        PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\\n        PREFIX dc: <http://purl.org/dc/elements/1.1/>\\n        PREFIX dct: <http://purl.org/dc/terms/>\\n        PREFIX skos: <http://www.w3.org/2004/02/skos/core#>\\n        PREFIX edm: <http://www.europeana.eu/schemas/edm/>\\n        PREFIX foaf: <http://xmlns.com/foaf/0.1/>\\n        # tel aantallen per materiaal\\n        SELECT ?subcategorie ?materiaalLabel (COUNT(?cho) AS ?choCount) WHERE {\\n        # haal van een term in de thesaurus de subcategorieen op\\n        \".concat(e.termmaster,\" skos:narrower* ?subcategorie .\\n        # haal de objecten van deze subcategorieen en het materiaal\\n        ?cho edm:isRelatedTo ?subcategorie .\\n        ?cho dct:medium ?materiaal .\\n        # haal het Label op van materiaal\\n        ?materiaal skos:prefLabel ?materiaalLabel .\\n        }\\n        GROUP BY ?subcategorie ?materiaalLabel\\n        ORDER BY DESC(?choCount)\\n        LIMIT 5\\n      \");l(\"https://api.data.netwerkdigitaalerfgoed.nl/datasets/ivo/NMVW/services/NMVW-20/sparql\",a,e,m)})},m=function(e,a){n++,o.push(d(e,a)),n>=r&&h(o)},d=function(e,a){return{name:a.name,value:Number(a.value),materials:e.results.bindings.map(function(e){return{name:e.materiaalLabel.value,value:Number(e.choCount.value)}})}};function h(t){var n=t.slice(0,5);(0,e.default)(n,600,300),(0,a.default)(t,260,35)}"},"sourceMaps":{"js":{"mappings":[{"source":"index.js","original":{"line":112,"column":1},"generated":{"line":1,"column":0}},{"source":"index.js","original":{"line":1,"column":0},"generated":{"line":1,"column":13}},{"source":"index.js","original":{"line":1,"column":0},"generated":{"line":1,"column":17}},{"source":"index.js","original":{"line":1,"column":0},"generated":{"line":1,"column":19}},{"source":"index.js","original":{"line":1,"column":0},"generated":{"line":1,"column":21}},{"source":"index.js","original":{"line":1,"column":0},"generated":{"line":1,"column":29}},{"source":"index.js","original":{"line":2,"column":0},"generated":{"line":1,"column":53}},{"source":"index.js","original":{"line":2,"column":0},"generated":{"line":1,"column":55}},{"source":"index.js","original":{"line":2,"column":0},"generated":{"line":1,"column":57}},{"source":"index.js","original":{"line":2,"column":0},"generated":{"line":1,"column":65}},{"source":"index.js","original":{"line":112,"column":1},"generated":{"line":1,"column":91}},{"source":"index.js","original":{"line":112,"column":1},"generated":{"line":1,"column":100}},{"source":"index.js","original":{"line":112,"column":1},"generated":{"line":1,"column":102}},{"source":"index.js","original":{"line":112,"column":1},"generated":{"line":1,"column":105}},{"source":"index.js","original":{"line":112,"column":1},"generated":{"line":1,"column":112}},{"source":"index.js","original":{"line":112,"column":1},"generated":{"line":1,"column":115}},{"source":"index.js","original":{"line":112,"column":1},"generated":{"line":1,"column":117}},{"source":"index.js","original":{"line":112,"column":1},"generated":{"line":1,"column":128}},{"source":"index.js","original":{"line":112,"column":1},"generated":{"line":1,"column":130}},{"source":"index.js","original":{"line":112,"column":1},"generated":{"line":1,"column":131}},{"source":"index.js","original":{"line":112,"column":1},"generated":{"line":1,"column":139}},{"source":"index.js","original":{"line":4,"column":0},"generated":{"line":1,"column":142}},{"source":"index.js","name":"categoryCounter","original":{"line":4,"column":4},"generated":{"line":1,"column":146}},{"source":"index.js","original":{"line":4,"column":22},"generated":{"line":1,"column":148}},{"source":"index.js","name":"nCategories","original":{"line":5,"column":6},"generated":{"line":1,"column":150}},{"source":"index.js","original":{"line":5,"column":20},"generated":{"line":1,"column":152}},{"source":"index.js","name":"categories","original":{"line":6,"column":6},"generated":{"line":1,"column":155}},{"source":"index.js","original":{"line":6,"column":19},"generated":{"line":1,"column":157}},{"source":"index.js","name":"queryMainCategories","original":{"line":8,"column":6},"generated":{"line":1,"column":160}},{"source":"index.js","original":{"line":8,"column":0},"generated":{"line":1,"column":162}},{"source":"index.js","name":"fetchDataFromQuery","original":{"line":28,"column":6},"generated":{"line":1,"column":964}},{"source":"index.js","original":{"line":28,"column":27},"generated":{"line":1,"column":966}},{"source":"index.js","name":"querySrc","original":{"line":28,"column":28},"generated":{"line":1,"column":975}},{"source":"index.js","name":"query","original":{"line":28,"column":38},"generated":{"line":1,"column":977}},{"source":"index.js","name":"outsideScope","original":{"line":28,"column":45},"generated":{"line":1,"column":979}},{"source":"index.js","name":"responseFn","original":{"line":28,"column":59},"generated":{"line":1,"column":981}},{"source":"index.js","name":"fetch","original":{"line":29,"column":2},"generated":{"line":1,"column":984}},{"source":"index.js","name":"querySrc","original":{"line":29,"column":11},"generated":{"line":1,"column":990}},{"source":"index.js","name":"querySrc","original":{"line":29,"column":11},"generated":{"line":1,"column":993}},{"source":"index.js","name":"querySrc","original":{"line":29,"column":11},"generated":{"line":1,"column":1000}},{"source":"index.js","name":"encodeURIComponent","original":{"line":29,"column":29},"generated":{"line":1,"column":1002}},{"source":"index.js","name":"encodeURIComponent","original":{"line":29,"column":29},"generated":{"line":1,"column":1013}},{"source":"index.js","name":"encodeURIComponent","original":{"line":29,"column":29},"generated":{"line":1,"column":1020}},{"source":"index.js","name":"query","original":{"line":29,"column":48},"generated":{"line":1,"column":1039}},{"source":"index.js","original":{"line":29,"column":2},"generated":{"line":1,"column":1042}},{"source":"index.js","name":"then","original":{"line":30,"column":5},"generated":{"line":1,"column":1059}},{"source":"index.js","original":{"line":30,"column":10},"generated":{"line":1,"column":1064}},{"source":"index.js","name":"res","original":{"line":30,"column":10},"generated":{"line":1,"column":1073}},{"source":"index.js","name":"res","original":{"line":30,"column":17},"generated":{"line":1,"column":1076}},{"source":"index.js","name":"res","original":{"line":30,"column":17},"generated":{"line":1,"column":1083}},{"source":"index.js","name":"json","original":{"line":30,"column":21},"generated":{"line":1,"column":1085}},{"source":"index.js","name":"then","original":{"line":31,"column":5},"generated":{"line":1,"column":1094}},{"source":"index.js","original":{"line":31,"column":10},"generated":{"line":1,"column":1099}},{"source":"index.js","name":"data","original":{"line":31,"column":10},"generated":{"line":1,"column":1108}},{"source":"index.js","name":"responseFn","original":{"line":31,"column":18},"generated":{"line":1,"column":1111}},{"source":"index.js","name":"responseFn","original":{"line":31,"column":18},"generated":{"line":1,"column":1118}},{"source":"index.js","name":"data","original":{"line":31,"column":29},"generated":{"line":1,"column":1120}},{"source":"index.js","name":"outsideScope","original":{"line":31,"column":35},"generated":{"line":1,"column":1122}},{"source":"index.js","name":"handleDataMaterialPerCategory","original":{"line":34,"column":6},"generated":{"line":1,"column":1128}},{"source":"index.js","original":{"line":34,"column":38},"generated":{"line":1,"column":1130}},{"source":"index.js","name":"data","original":{"line":34,"column":38},"generated":{"line":1,"column":1139}},{"source":"index.js","name":"categories","original":{"line":35,"column":8},"generated":{"line":1,"column":1142}},{"source":"index.js","name":"categories","original":{"line":35,"column":8},"generated":{"line":1,"column":1146}},{"source":"index.js","name":"getCategoriesFromData","original":{"line":35,"column":21},"generated":{"line":1,"column":1148}},{"source":"index.js","name":"data","original":{"line":35,"column":43},"generated":{"line":1,"column":1150}},{"source":"index.js","name":"fetchMaterialPerCategoryEach","original":{"line":36,"column":2},"generated":{"line":1,"column":1153}},{"source":"index.js","name":"categories","original":{"line":36,"column":31},"generated":{"line":1,"column":1155}},{"source":"index.js","name":"fetchDataFromQuery","original":{"line":39,"column":0},"generated":{"line":1,"column":1159}},{"source":"index.js","original":{"line":40,"column":2},"generated":{"line":1,"column":1161}},{"source":"index.js","name":"queryMainCategories","original":{"line":41,"column":2},"generated":{"line":1,"column":1248}},{"source":"index.js","original":{"line":42,"column":2},"generated":{"line":1,"column":1250}},{"source":"index.js","name":"handleDataMaterialPerCategory","original":{"line":43,"column":2},"generated":{"line":1,"column":1253}},{"source":"index.js","original":{"line":46,"column":0},"generated":{"line":1,"column":1256}},{"source":"index.js","name":"getCategoriesFromData","original":{"line":46,"column":6},"generated":{"line":1,"column":1260}},{"source":"index.js","original":{"line":46,"column":30},"generated":{"line":1,"column":1262}},{"source":"index.js","name":"data","original":{"line":46,"column":30},"generated":{"line":1,"column":1271}},{"source":"index.js","name":"data","original":{"line":47,"column":9},"generated":{"line":1,"column":1274}},{"source":"index.js","name":"data","original":{"line":47,"column":9},"generated":{"line":1,"column":1281}},{"source":"index.js","name":"results","original":{"line":47,"column":14},"generated":{"line":1,"column":1283}},{"source":"index.js","name":"bindings","original":{"line":47,"column":22},"generated":{"line":1,"column":1291}},{"source":"index.js","name":"map","original":{"line":47,"column":31},"generated":{"line":1,"column":1300}},{"source":"index.js","original":{"line":47,"column":35},"generated":{"line":1,"column":1304}},{"source":"index.js","name":"i","original":{"line":47,"column":35},"generated":{"line":1,"column":1313}},{"source":"index.js","original":{"line":48,"column":11},"generated":{"line":1,"column":1316}},{"source":"index.js","original":{"line":48,"column":11},"generated":{"line":1,"column":1322}},{"source":"index.js","name":"termmaster","original":{"line":49,"column":6},"generated":{"line":1,"column":1323}},{"source":"index.js","name":"i","original":{"line":49,"column":22},"generated":{"line":1,"column":1334}},{"source":"index.js","name":"i","original":{"line":49,"column":22},"generated":{"line":1,"column":1338}},{"source":"index.js","name":"i","original":{"line":49,"column":22},"generated":{"line":1,"column":1345}},{"source":"index.js","name":"category","original":{"line":49,"column":24},"generated":{"line":1,"column":1347}},{"source":"index.js","name":"value","original":{"line":49,"column":33},"generated":{"line":1,"column":1356}},{"source":"index.js","original":{"line":48,"column":11},"generated":{"line":1,"column":1362}},{"source":"index.js","name":"name","original":{"line":50,"column":6},"generated":{"line":1,"column":1367}},{"source":"index.js","name":"i","original":{"line":50,"column":12},"generated":{"line":1,"column":1372}},{"source":"index.js","name":"categoryLabel","original":{"line":50,"column":14},"generated":{"line":1,"column":1374}},{"source":"index.js","name":"value","original":{"line":50,"column":28},"generated":{"line":1,"column":1388}},{"source":"index.js","name":"value","original":{"line":51,"column":6},"generated":{"line":1,"column":1394}},{"source":"index.js","name":"i","original":{"line":51,"column":13},"generated":{"line":1,"column":1400}},{"source":"index.js","name":"objCount","original":{"line":51,"column":15},"generated":{"line":1,"column":1402}},{"source":"index.js","name":"value","original":{"line":51,"column":24},"generated":{"line":1,"column":1411}},{"source":"index.js","name":"fetchMaterialPerCategoryEach","original":{"line":56,"column":6},"generated":{"line":1,"column":1421}},{"source":"index.js","original":{"line":56,"column":37},"generated":{"line":1,"column":1423}},{"source":"index.js","name":"categoriesTermaster","original":{"line":56,"column":37},"generated":{"line":1,"column":1432}},{"source":"index.js","name":"categoriesTermaster","original":{"line":57,"column":2},"generated":{"line":1,"column":1435}},{"source":"index.js","name":"forEach","original":{"line":57,"column":22},"generated":{"line":1,"column":1437}},{"source":"index.js","original":{"line":57,"column":30},"generated":{"line":1,"column":1445}},{"source":"index.js","name":"category","original":{"line":57,"column":30},"generated":{"line":1,"column":1454}},{"source":"index.js","name":"queryCategories","original":{"line":58,"column":10},"generated":{"line":1,"column":1457}},{"source":"index.js","name":"queryCategories","original":{"line":58,"column":10},"generated":{"line":1,"column":1461}},{"source":"index.js","name":"category","original":{"line":68,"column":10},"generated":{"line":1,"column":1463}},{"source":"index.js","name":"category","original":{"line":68,"column":10},"generated":{"line":1,"column":2005}},{"source":"index.js","name":"category","original":{"line":68,"column":10},"generated":{"line":1,"column":2012}},{"source":"index.js","name":"termmaster","original":{"line":68,"column":19},"generated":{"line":1,"column":2014}},{"source":"index.js","original":{"line":58,"column":4},"generated":{"line":1,"column":2025}},{"source":"index.js","name":"fetchDataFromQuery","original":{"line":80,"column":4},"generated":{"line":1,"column":2427}},{"source":"index.js","original":{"line":81,"column":6},"generated":{"line":1,"column":2429}},{"source":"index.js","name":"queryCategories","original":{"line":82,"column":6},"generated":{"line":1,"column":2516}},{"source":"index.js","name":"category","original":{"line":83,"column":6},"generated":{"line":1,"column":2518}},{"source":"index.js","name":"handleFetchMaterialPerCategory","original":{"line":84,"column":6},"generated":{"line":1,"column":2520}},{"source":"index.js","name":"handleFetchMaterialPerCategory","original":{"line":89,"column":6},"generated":{"line":1,"column":2526}},{"source":"index.js","original":{"line":89,"column":39},"generated":{"line":1,"column":2528}},{"source":"index.js","name":"data","original":{"line":89,"column":40},"generated":{"line":1,"column":2537}},{"source":"index.js","name":"category","original":{"line":89,"column":46},"generated":{"line":1,"column":2539}},{"source":"index.js","name":"categoryCounter","original":{"line":90,"column":2},"generated":{"line":1,"column":2542}},{"source":"index.js","name":"categories","original":{"line":91,"column":2},"generated":{"line":1,"column":2546}},{"source":"index.js","name":"push","original":{"line":91,"column":13},"generated":{"line":1,"column":2548}},{"source":"index.js","name":"normalizeMaterialPerCategory","original":{"line":91,"column":18},"generated":{"line":1,"column":2553}},{"source":"index.js","name":"data","original":{"line":91,"column":47},"generated":{"line":1,"column":2555}},{"source":"index.js","name":"category","original":{"line":91,"column":53},"generated":{"line":1,"column":2557}},{"source":"index.js","name":"categoryCounter","original":{"line":92,"column":6},"generated":{"line":1,"column":2561}},{"source":"index.js","name":"nCategories","original":{"line":92,"column":25},"generated":{"line":1,"column":2564}},{"source":"index.js","name":"renderCharts","original":{"line":92,"column":38},"generated":{"line":1,"column":2567}},{"source":"index.js","name":"categories","original":{"line":92,"column":51},"generated":{"line":1,"column":2569}},{"source":"index.js","name":"normalizeMaterialPerCategory","original":{"line":95,"column":6},"generated":{"line":1,"column":2573}},{"source":"index.js","original":{"line":95,"column":37},"generated":{"line":1,"column":2575}},{"source":"index.js","name":"data","original":{"line":95,"column":38},"generated":{"line":1,"column":2584}},{"source":"index.js","name":"category","original":{"line":95,"column":44},"generated":{"line":1,"column":2586}},{"source":"index.js","original":{"line":96,"column":9},"generated":{"line":1,"column":2589}},{"source":"index.js","original":{"line":96,"column":9},"generated":{"line":1,"column":2595}},{"source":"index.js","name":"name","original":{"line":97,"column":4},"generated":{"line":1,"column":2596}},{"source":"index.js","name":"category","original":{"line":97,"column":10},"generated":{"line":1,"column":2601}},{"source":"index.js","name":"name","original":{"line":97,"column":19},"generated":{"line":1,"column":2603}},{"source":"index.js","name":"value","original":{"line":98,"column":4},"generated":{"line":1,"column":2608}},{"source":"index.js","name":"Number","original":{"line":98,"column":11},"generated":{"line":1,"column":2614}},{"source":"index.js","name":"category","original":{"line":98,"column":18},"generated":{"line":1,"column":2621}},{"source":"index.js","name":"value","original":{"line":98,"column":27},"generated":{"line":1,"column":2623}},{"source":"index.js","name":"materials","original":{"line":99,"column":4},"generated":{"line":1,"column":2630}},{"source":"index.js","name":"data","original":{"line":99,"column":15},"generated":{"line":1,"column":2640}},{"source":"index.js","name":"results","original":{"line":99,"column":20},"generated":{"line":1,"column":2642}},{"source":"index.js","name":"bindings","original":{"line":99,"column":28},"generated":{"line":1,"column":2650}},{"source":"index.js","name":"map","original":{"line":99,"column":37},"generated":{"line":1,"column":2659}},{"source":"index.js","original":{"line":99,"column":41},"generated":{"line":1,"column":2663}},{"source":"index.js","name":"i","original":{"line":99,"column":41},"generated":{"line":1,"column":2672}},{"source":"index.js","original":{"line":100,"column":13},"generated":{"line":1,"column":2675}},{"source":"index.js","original":{"line":100,"column":13},"generated":{"line":1,"column":2681}},{"source":"index.js","name":"name","original":{"line":101,"column":8},"generated":{"line":1,"column":2682}},{"source":"index.js","name":"i","original":{"line":101,"column":14},"generated":{"line":1,"column":2687}},{"source":"index.js","name":"materiaalLabel","original":{"line":101,"column":16},"generated":{"line":1,"column":2689}},{"source":"index.js","name":"value","original":{"line":101,"column":31},"generated":{"line":1,"column":2704}},{"source":"index.js","name":"value","original":{"line":102,"column":8},"generated":{"line":1,"column":2710}},{"source":"index.js","name":"Number","original":{"line":102,"column":15},"generated":{"line":1,"column":2716}},{"source":"index.js","name":"i","original":{"line":102,"column":22},"generated":{"line":1,"column":2723}},{"source":"index.js","name":"choCount","original":{"line":102,"column":24},"generated":{"line":1,"column":2725}},{"source":"index.js","name":"value","original":{"line":102,"column":33},"generated":{"line":1,"column":2734}},{"source":"index.js","original":{"line":108,"column":0},"generated":{"line":1,"column":2746}},{"source":"index.js","name":"renderCharts","original":{"line":108,"column":9},"generated":{"line":1,"column":2755}},{"source":"index.js","name":"categories","original":{"line":108,"column":22},"generated":{"line":1,"column":2757}},{"source":"index.js","name":"dataForFP","original":{"line":109,"column":8},"generated":{"line":1,"column":2760}},{"source":"index.js","name":"dataForFP","original":{"line":109,"column":8},"generated":{"line":1,"column":2764}},{"source":"index.js","name":"categories","original":{"line":109,"column":20},"generated":{"line":1,"column":2766}},{"source":"index.js","name":"slice","original":{"line":109,"column":31},"generated":{"line":1,"column":2768}},{"source":"index.js","original":{"line":109,"column":37},"generated":{"line":1,"column":2774}},{"source":"index.js","original":{"line":109,"column":40},"generated":{"line":1,"column":2776}},{"source":"index.js","name":"dataForFP","original":{"line":110,"column":17},"generated":{"line":1,"column":2780}},{"source":"index.js","name":"dataForFP","original":{"line":110,"column":17},"generated":{"line":1,"column":2782}},{"source":"index.js","name":"dataForFP","original":{"line":110,"column":17},"generated":{"line":1,"column":2784}},{"source":"index.js","name":"dataForFP","original":{"line":110,"column":17},"generated":{"line":1,"column":2793}},{"source":"index.js","original":{"line":110,"column":28},"generated":{"line":1,"column":2795}},{"source":"index.js","original":{"line":110,"column":33},"generated":{"line":1,"column":2799}},{"source":"index.js","name":"categories","original":{"line":111,"column":19},"generated":{"line":1,"column":2805}},{"source":"index.js","name":"categories","original":{"line":111,"column":19},"generated":{"line":1,"column":2807}},{"source":"index.js","name":"categories","original":{"line":111,"column":19},"generated":{"line":1,"column":2809}},{"source":"index.js","name":"categories","original":{"line":111,"column":19},"generated":{"line":1,"column":2818}},{"source":"index.js","original":{"line":111,"column":31},"generated":{"line":1,"column":2820}},{"source":"index.js","original":{"line":111,"column":36},"generated":{"line":1,"column":2824}}],"sources":{"index.js":"import renderBarChart from './renderBarChart.js'\nimport renderDonutChart from './renderDonutChart.js'\n\nlet categoryCounter = 0;\nconst nCategories = 19;\nconst categories = [];\n\nconst queryMainCategories = `\n  #+ summary: Get titles meestvoorkomende catogrieen\n  PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\n  PREFIX dc: <http://purl.org/dc/elements/1.1/>\n  PREFIX dct: <http://purl.org/dc/terms/>\n  PREFIX skos: <http://www.w3.org/2004/02/skos/core#>\n  PREFIX edm: <http://www.europeana.eu/schemas/edm/>\n  PREFIX foaf: <http://xmlns.com/foaf/0.1/>\n  # tel aantallen per materiaal\n  SELECT ?categoryLabel ?category (COUNT(?allChos) AS ?objCount) WHERE {\n    ?cho edm:isRelatedTo <https://hdl.handle.net/20.500.11840/termmaster2802> .\n    <https://hdl.handle.net/20.500.11840/termmaster2802> skos:narrower ?category .\n    ?category skos:prefLabel ?categoryLabel .\n    ?category skos:narrower* ?allChos .\n  }\n    \n  GROUP BY ?categoryLabel ?category\n  ORDER BY DESC(?objCount)\n`;\n\nconst fetchDataFromQuery = (querySrc, query, outsideScope, responseFn) => {\n  fetch(`${querySrc}?query=${encodeURIComponent(query)}&format=json`)\n    .then(res => res.json())\n    .then(data => responseFn(data, outsideScope));\n};\n\nconst handleDataMaterialPerCategory = data => {\n  const categories = getCategoriesFromData(data);\n  fetchMaterialPerCategoryEach(categories);\n};\n\nfetchDataFromQuery(\n  \"https://api.data.netwerkdigitaalerfgoed.nl/datasets/ivo/NMVW/services/NMVW-20/sparql\",\n  queryMainCategories,\n  \"\",\n  handleDataMaterialPerCategory\n);\n\nconst getCategoriesFromData = data => {\n  return data.results.bindings.map(i => {\n    return {\n      termmaster: `<${i.category.value}>`,\n      name: i.categoryLabel.value,\n      value: i.objCount.value\n    };\n  });\n};\n\nconst fetchMaterialPerCategoryEach = categoriesTermaster => {\n  categoriesTermaster.forEach(category => {\n    const queryCategories = `\n        PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\n        PREFIX dc: <http://purl.org/dc/elements/1.1/>\n        PREFIX dct: <http://purl.org/dc/terms/>\n        PREFIX skos: <http://www.w3.org/2004/02/skos/core#>\n        PREFIX edm: <http://www.europeana.eu/schemas/edm/>\n        PREFIX foaf: <http://xmlns.com/foaf/0.1/>\n        # tel aantallen per materiaal\n        SELECT ?subcategorie ?materiaalLabel (COUNT(?cho) AS ?choCount) WHERE {\n        # haal van een term in de thesaurus de subcategorieen op\n        ${category.termmaster} skos:narrower* ?subcategorie .\n        # haal de objecten van deze subcategorieen en het materiaal\n        ?cho edm:isRelatedTo ?subcategorie .\n        ?cho dct:medium ?materiaal .\n        # haal het Label op van materiaal\n        ?materiaal skos:prefLabel ?materiaalLabel .\n        }\n        GROUP BY ?subcategorie ?materiaalLabel\n        ORDER BY DESC(?choCount)\n        LIMIT 5\n      `;\n\n    fetchDataFromQuery(\n      \"https://api.data.netwerkdigitaalerfgoed.nl/datasets/ivo/NMVW/services/NMVW-20/sparql\",\n      queryCategories,\n      category,\n      handleFetchMaterialPerCategory\n    );\n  });\n};\n\nconst handleFetchMaterialPerCategory = (data, category) => {\n  categoryCounter++;\n  categories.push(normalizeMaterialPerCategory(data, category));\n  if (categoryCounter >= nCategories) renderCharts(categories);\n};\n\nconst normalizeMaterialPerCategory = (data, category) => {\n  return {\n    name: category.name,\n    value: Number(category.value),\n    materials: data.results.bindings.map(i => {\n      return {\n        name: i.materiaalLabel.value,\n        value: Number(i.choCount.value)\n      };\n    })\n  };\n};\n\nfunction renderCharts(categories) {\n  const dataForFP = categories.slice(0, 5);\n  renderBarChart(dataForFP, 600, 300);\n  renderDonutChart(categories, 260, 35);\n}\n\n\n\n\n\n"},"lineCount":null}},"error":null,"hash":"bb71ffe21e5d48bc94a06e8b1b845017","cacheData":{"env":{}}}